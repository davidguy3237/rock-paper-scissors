<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Rock Paper Scissors</title>
  </head>

  <body>
    <script>
      function getComputerChoice() {
        let randomChoice = Math.random() * 3;
        if (randomChoice > 2) {
          return 'rock';
        } else if (randomChoice > 1) {
          return 'paper';
        } else if (randomChoice > 0) {
          return 'scissors';
        }
      }

      function playRound(playerSelection, computerSelection) {
        let playerSelect = playerSelection.toLowerCase();

        if (playerSelect === computerSelection) {
          return `It's a tie! ${playerSelect} ties with ${computerSelection}.`;
        } else if (playerSelect === 'rock') {
          if (computerSelection === 'paper') {
            return `You lose! ${computerSelection} beats ${playerSelect}.`;
          } else if (computerSelection === 'scissors') {
            return `You win! ${playerSelect} beats ${computerSelection}.`;
          }
        } else if (playerSelect === 'paper') {
          if (computerSelection === 'scissors') {
            return `You lose! ${computerSelection} beats ${playerSelect}.`;
          } else if (computerSelection === 'rock') {
            return `You win! ${playerSelect} beats ${computerSelection}.`;
          }
        } else if (playerSelect === 'scissors') {
          if (computerSelection === 'rock') {
            return `You lose! ${computerSelection} beats ${playerSelect}.`;
          } else if (computerSelection === 'paper') {
            return `You win! ${playerSelect} beats ${computerSelection}.`;
          }
        } else {
          return `ERROR!! INCORRECT INPUT!!`;
        }
      }

      function game() {
        let playerPoints = 0;
        let computerPoints = 0;
        let tiePoints = 0;

        for (let i = 0; i < 5; i++) {
          let round = playRound(playerSelection, getComputerChoice());
          if (round.includes('win')) {
            playerPoints++;
          } else if (round.includes('lose')) {
            computerPoints++;
          } else if (round.includes('tie')) {
            tiePoints++;
          } else if (round.includes('ERROR')) {
            return round;
          }
        }

        if (playerPoints > computerPoints) {
          return `YOU ARE THE WINNER. You won ${playerPoints} out of 5 games! 
          The computer won ${computerPoints} games, and there were ${tiePoints} ties.`;
        } else if (playerPoints < computerPoints) {
          return `YOU ARE THE LOSER. The computer won ${computerPoints} games, 
          you won ${playerPoints} games, and there were ${tiePoints} ties.`;
        } else if (playerPoints === computerPoints) {
          return `IT'S A TIE!! You won ${playerPoints} games, 
          the computer won ${computerPoints} games, and there were ${tiePoints} ties.`;
        }
      }
      let playerSelection = prompt("Please type 'rock', 'paper', or 'scissors'.");
      console.log(game()); 
    </script>
  </body>
</html>